type Challenge {
  id: ChallengeId!
  name: String!
  description: String!
  createdOn: OffsetDateTime!
  finishesOn: OffsetDateTime!
  measure: Measure!
  createdBy: User!
  summaries(size: Int, offset: Int): UserChallengeSummarysResponse!
  leader: User
}

input ChallengeFilter {
  name: String
  description: String
  createdBy: UserId
  createdOn: OffsetDateTime
  finishesOn: OffsetDateTime
}

# The `String` scalar type represents textual data, represented as UTF-8 character
# sequences. The String type is most often used by GraphQL to represent free-form
# human-readable text.
scalar ChallengeId

type ChallengesResponse {
  total: Long!
  hasNextPage: Boolean!
  results: [Challenge!]!
}

input CreateChallenge {
  id: ChallengeId
  name: String!
  description: String!
  createdBy: UserId!
  createdOn: OffsetDateTime = false
  finishesOn: OffsetDateTime!
  measure: MeasureInput!
}

input CreateUser {
  id: UserId
  name: String!
  email: Email!
  gender: Gender!
  createdAt: OffsetDateTime = false
}

# The `String` scalar type represents textual data, represented as UTF-8 character
# sequences. The String type is most often used by GraphQL to represent free-form
# human-readable text.
scalar Email

enum Gender {
  Male
  Female
}

type Invitation {
  id: InvitationId!
  read: Boolean!
  sendTime: OffsetDateTime!
  forUser: User!
  fromUser: User!
  toChallenge: Challenge!
}

input InvitationFilter {
  forUser: UserId
  fromUser: UserId
  toChallenge: ChallengeId
  read: Boolean
  sendTime: OffsetDateTime
}

# The `String` scalar type represents textual data, represented as UTF-8 character
# sequences. The String type is most often used by GraphQL to represent free-form
# human-readable text.
scalar InvitationId

type InvitationsResponse {
  total: Long!
  hasNextPage: Boolean!
  results: [Invitation!]!
}

input JoinChallenge {
  userId: UserId!
  challengeId: ChallengeId!
}

input LogActivity {
  userId: UserId!
  challengeId: ChallengeId!
  value: MeasureValueInput!
  date: OffsetDateTime
}

# The `Long` scalar type represents non-fractional signed whole numeric values.
# Long can represent values between -(2^63) and 2^63 - 1.
scalar Long

input MarkInvitationAsRead {
  id: InvitationId!
}

type Measure {
  unitName: String!
  allowDecimal: Boolean!
  valueSummarization: ValueSummarization!
  valueOrder: ValueOrder!
}

input MeasureInput {
  unitName: String!
  allowDecimal: Boolean!
  valueSummarization: ValueSummarization!
  valueOrder: ValueOrder!
}

type MeasureValue {
  integerValue: Int
  decimalValue: Float
}

input MeasureValueInput {
  integerValue: Int
  decimalValue: Float
}

type Mutation {
  createUser(input: CreateUser!): User!
  createChallenge(input: CreateChallenge!): Challenge!
  joinChallenge(input: JoinChallenge!): UserChallengeSummary!
  logActivity(input: LogActivity!): UserChallengeActivity!
  sendInvitation(input: SendInvitation!): Invitation!
  markInvitationAsRead(input: MarkInvitationAsRead!): Invitation!
}

scalar OffsetDateTime

type Query {
  allUsers(size: Int, offset: Int, filter: UserFilter): UsersResponse!
  user(id: UserId!): User
  getUserByEmail(email: Email!): User
  allChallenges(size: Int, offset: Int, filter: ChallengeFilter): ChallengesResponse!
  challenge(id: ChallengeId!): Challenge
  allUserChallengeSummaries(size: Int, offset: Int, filter: UserChallengeSummaryFilter): UserChallengeSummarysResponse!
  userchallengesummary(id: UserChallengeSummaryId!): UserChallengeSummary
  allUserChallengeActivities(size: Int, offset: Int, filter: UserChallengeActivityFilter): UserChallengeActivitysResponse!
  userchallengeactivity(id: UserChallengeActivityId!): UserChallengeActivity
  allInvitations(size: Int, offset: Int, filter: InvitationFilter): InvitationsResponse!
  invitation(id: InvitationId!): Invitation
}

input SendInvitation {
  forUser: UserId!
  fromUser: UserId!
  toChallenge: ChallengeId!
}

type User {
  id: UserId!
  name: String!
  email: Email!
  gender: Gender!
  createdAt: OffsetDateTime!
  activities(size: Int, offset: Int): UserChallengeActivitysResponse!
  challenges(size: Int, offset: Int): UserChallengeSummarysResponse!
  invitations(size: Int, offset: Int, filter: InvitationFilter): InvitationsResponse!
  participatesInChallenge(challengeId: ChallengeId!): Boolean!
}

type UserChallengeActivity {
  id: UserChallengeActivityId!
  value: MeasureValue!
  date: OffsetDateTime!
  user: User!
  challenge: Challenge!
}

input UserChallengeActivityFilter {
  userId: UserId
  challengeId: ChallengeId
  date: OffsetDateTime
}

# The `String` scalar type represents textual data, represented as UTF-8 character
# sequences. The String type is most often used by GraphQL to represent free-form
# human-readable text.
scalar UserChallengeActivityId

type UserChallengeActivitysResponse {
  total: Long!
  hasNextPage: Boolean!
  results: [UserChallengeActivity!]!
}

type UserChallengeSummary {
  id: UserChallengeSummaryId!
  summaryValue: MeasureValue!
  position: Int
  lastActive: OffsetDateTime
  user: User!
  challenge: Challenge!
}

input UserChallengeSummaryFilter {
  userId: UserId
  challengeId: ChallengeId
}

# The `String` scalar type represents textual data, represented as UTF-8 character
# sequences. The String type is most often used by GraphQL to represent free-form
# human-readable text.
scalar UserChallengeSummaryId

type UserChallengeSummarysResponse {
  total: Long!
  hasNextPage: Boolean!
  results: [UserChallengeSummary!]!
}

input UserFilter {
  name: String
  email: Email
  gender: Gender
  createdAt: OffsetDateTime
}

# The `String` scalar type represents textual data, represented as UTF-8 character
# sequences. The String type is most often used by GraphQL to represent free-form
# human-readable text.
scalar UserId

type UsersResponse {
  total: Long!
  hasNextPage: Boolean!
  results: [User!]!
}

enum ValueOrder {
  BiggerWins
  SmallerWins
}

enum ValueSummarization {
  Summarize
  Best
}

